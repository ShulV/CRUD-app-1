# CRUD-app-1
CRUD app. Tech stack: java spring, thymeleaf, HTML, CSS, postgres, JDBC Template

## Скрипты работы с базой данных (PostgreSQL)

### Код генерации БД (DB generation SQL script):

CREATE TABLE people(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    "name" varchar(50) NOT NULL,
    patronymic varchar(50) NOT NULL,
    surname varchar(50) NOT NULL,
    birthday date NOT NULL,
    email varchar(50) NOT NULL UNIQUE,
);


CREATE TABLE books(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    "name" varchar(100) NOT NULL,
    author varchar(100) NOT NULL,
    date date NOT NULL,
    people_id int DEFAULT NULL REFERENCES people(id) ON DELETE Set null ON UPDATE Cascade
);

### Пример скрипта добавления книг:
INSERT INTO public.books(
	name, author, date)
	VALUES ('Война и мир', 'Лев Толстой', '01.01.1862'),
	('Отцы и дети', 'Иван Тургенев', '01.01.1868'),
	('Старик и море', 'Эрнест Хемингуэй', '01.01.1952');

### Пример скрипта добавления пользователей:
INSERT INTO public.people(
	name, patronymic, surname, birthday)
	VALUES ('Виктор', 'Максимович', 'Шульпов', '14.07.2001'),
	('Илья', 'Игоревич', 'Шинтяпин', '15.05.2001'),
	('Максим', 'Владимирович', 'Владимирович', '16.10.2000');
	
### Cкрипт выборки всех людей:
SELECT * FROM People;

### Cкрипт выборки человека по id:
SELECT * FROM People WHERE id=?;

### Пример скрипта выборки человека, который взял книгу
select p.id, p.name, p.patronymic, p.surname, p.birthday from people as p
    join books as b
    on p.id = b.person_id
    where b.id = 4;